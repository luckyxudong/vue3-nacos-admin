# Design: 图标系统架构设计

## Context

Vue3 模板项目需要一套完整的图标解决方案，以支持多种图标使用场景。当前项目已集成 UnoCSS，但尚未配置图标支持。需要提供：
1. UnoCSS 图标支持（基于 Iconify）
2. 本地 SVG 图标支持
3. 统一的 Icon 组件封装

## Goals / Non-Goals

### Goals
- 提供多种图标使用方式，满足不同场景需求
- 统一图标使用接口，简化开发体验
- 支持自定义图标和第三方图标库
- 保持与项目现有架构模式一致（模块化注册）

### Non-Goals
- 不强制使用特定的图标库
- 不限制图标来源（支持在线和本地）
- 不实现图标管理后台或图标选择器

## Decisions

### Decision: 使用 UnoCSS presetIcons 集成 Iconify
**理由**：
- UnoCSS 已集成到项目中，使用 presetIcons 可以无缝集成
- Iconify 提供了丰富的图标库（超过 200,000 个图标）
- 通过类名使用图标，符合原子化 CSS 的理念
- 支持按需加载，不会增加打包体积

**替代方案**：
- 直接使用 `@iconify/vue` 组件：需要手动导入每个图标，不够灵活
- 使用其他图标库（如 Font Awesome）：图标数量有限，需要额外配置

### Decision: 使用 vite-plugin-svg-icons 处理本地 SVG
**理由**：
- Vite 官方推荐的 SVG 处理方案
- 支持 SVG sprite 模式，性能好
- 可以统一管理本地 SVG 图标
- 支持热更新

**替代方案**：
- 直接导入 SVG 文件：需要手动处理，不够优雅
- 使用其他 SVG 插件：vite-plugin-svg-icons 是主流选择

### Decision: 创建统一的 Icon 组件封装多种使用方式
**理由**：
- 统一接口，简化使用
- 支持多种图标类型，灵活性强
- 符合组件化开发理念
- 便于后续扩展和维护

**组件设计**：
- 通过 `type` prop 区分不同的图标类型
- 支持自定义前缀、字体族等配置
- 自动处理字体文件的动态加载（Iconfont 场景）

### Decision: 图标目录结构
**目录结构**：
```
src/
├── components/
│   └── icon/
│       └── icon.vue
└── assets/
    └── icons/          # 本地 SVG 图标目录
```

**理由**：
- 遵循项目现有的目录结构规范
- 组件放在 `components` 目录，资源放在 `assets` 目录
- 便于管理和维护

## Risks / Trade-offs

### 风险：依赖增加
**风险**：新增多个依赖包，可能增加项目体积
**缓解措施**：
- `@iconify/json` 是开发依赖，不会打包到生产环境
- `vite-plugin-svg-icons` 只在构建时使用
- `@iconify/vue` 是可选的，如果只使用 UnoCSS 图标可以不安装

### 风险：配置复杂度
**风险**：需要配置多个工具（UnoCSS、Vite 插件）
**缓解措施**：
- 提供清晰的配置文档
- 使用合理的默认值
- 遵循项目现有的配置模式

### 权衡：组件复杂度 vs 灵活性
**权衡**：Icon 组件需要支持多种类型，可能增加组件复杂度
**决策**：优先考虑灵活性，通过清晰的类型区分和文档降低使用复杂度

## Migration Plan

### 迁移步骤
1. 安装依赖包
2. 更新配置文件（`uno.config.ts`, `vite.config.ts`）
3. 创建组件和目录结构
4. 在现有页面中逐步迁移图标使用方式（如果需要）

### 回滚计划
- 如果出现问题，可以回退配置文件
- 移除新增的依赖包
- 删除新增的组件和目录

## Open Questions

- [ ] Icon 组件是否需要支持图标大小、颜色的统一配置？
- [ ] 是否需要提供图标选择器或图标预览工具？
- [ ] 是否需要支持图标的懒加载？
